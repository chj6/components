<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>树形菜单</title>
  <style>
    body {
      background: #ccc;
    }

    .menu {
      margin: 0;
      padding: 0;
    }

    .menu ul {
      padding-left: 0px;
    }

    .menu li {
      padding: 0;
      margin: 0;
      list-style: none;
      line-height: 17px;
      text-align: left;
      white-space: nowrap;
      outline: 0;
    }

    .menu a {
      cursor: pointer;
      display: block;
      text-decoration: none;
      color: #333;
      height: 35px;
      line-height: 35px;
      background: #fff;
    }

    /* 设置多级ul li 来指定padding-left位置 */

    /* 一级 */

    .menu>li>a {
      padding-left: 20px;
      height: 40px;
      line-height: 40px;
      background: red;
      color: #fff;
      border-bottom: solid 1px #ccc;
    }

    /* 二级 */

    .menu>li>ul>li>a {
      padding-left: 30px;
    }

    /* 三级 */

    .menu>li>ul>li>ul>li>a {
      padding-left: 40px;
    }

    /* 四级 */

    .menu>li>ul>li>ul>li>ul>li>a {
      padding-left: 50px;
    }

    /* 五级 */

    .menu>li>ul>li>ul>li>ul>li>ul>li>a {
      padding-left: 60px;
    }

    /* 六级 */

    .menu>li>ul>li>ul>li>ul>li>ul>li>ul>li>a {
      padding-left: 60px;
    }
  </style>
</head>

<body>
  <div class="main">

    <!-- 树形菜单 -->
    <div id="menuid" style="margin-top:20px;border-radius:6px;min-height:50px;overflow:hidden;"></div>
  </div>
</body>

</html>

<script>
  (function (window, undefined) {

    var defaultOps = {
      rootUlClass: 'menu',
      rootItemClass: 'rootitem',
      parentItemClass: 'parentitem',
      itemClass: 'item',
      aTarget: '_self'
    };

    function ChjMenu(options) {
      // 对参数和默认参数进行合并
      for (key in defaultOps) {
        options[key] = options[key] || defaultOps[key];
      }
      this.ops = options;
      this.init();
    }

    ChjMenu.prototype.init = function () {
      var _ops = this.ops;
      var id = _ops.warpId;
      var data = _ops.data;
      var html = [];
      html.push("<ul class='" + _ops.rootUlClass + "'>");
      html.push("<li>");
      this.makeHtml(html, data, 0);
      html.push("</li>");
      html.push("</ul>");
      document.getElementById(id).innerHTML = html.join("");
    };

    ChjMenu.prototype.makeHtml = function (html, data, rootIndex) {
      data = data || [];
      for (var i = 0; i < data.length; i++) {
        var node = data[i];
        if (rootIndex === 0) {
          this.makeRootNodeHtml(html, node);
          if (node.children && node.children.length > 0) {
            html.push("<ul>");
            this.makeHtml(html, node.children);
            html.push("</ul>");
          }
        } else {
          if (node.children && node.children.length > 0) {
            html.push("<li>");
            this.makeParentNodeHtml(html, node);
            html.push("<ul>");
            this.makeHtml(html, node.children);
            html.push("</ul></li>");
          } else {
            this.makeItemNodeHtml(html, node);
          }
        }
      }
    };

    ChjMenu.prototype.makeRootNodeHtml = function (html, node) {
      var _ops = this.ops;
      var itemClass = _ops.rootItemClass;
      html.push(this.makeABeforeNodeHtml(html, node, itemClass));
      html.push(this.makeNodeTextHtml(html, node));
      html.push("<span>icon</span>");
      html.push(this.makeAAfterNodeHtml(html, node));
    };

    ChjMenu.prototype.makeParentNodeHtml = function (html, node) {
      var _ops = this.ops;
      var itemClass = _ops.parentItemClass;
      html.push(this.makeABeforeNodeHtml(html, node, itemClass));
      html.push("<span>icon</span>");
      html.push(this.makeNodeTextHtml(html, node));
      html.push(this.makeAAfterNodeHtml(html, node));
    };

    ChjMenu.prototype.makeItemNodeHtml = function (html, node) {
      var _ops = this.ops;
      var itemClass = _ops.itemClass;
      html.push("<li>");
      html.push(this.makeABeforeNodeHtml(html, node, itemClass));
      html.push(this.makeNodeTextHtml(html, node));
      html.push(this.makeAAfterNodeHtml(html, node));
      html.push("</li>");
    };

    ChjMenu.prototype.makeNodeTextHtml = function (html, node) {
      html.push("<span>" + node.name + "</span>");
    };
    ChjMenu.prototype.makeABeforeNodeHtml = function (html, node, itemClass) {
      var _ops = this.ops;
      var href = node.href;
      var target = node.target || _ops.aTarget;
      html.push("<a " + (href ? ("href=" + href) : "") + " target=" + target + " class=" + itemClass + ">");
    };
    ChjMenu.prototype.makeAAfterNodeHtml = function (html, node) {
      html.push("</a>");
    };

    window.ChjMenu = ChjMenu;
  }(window));

  var data = [{
    "name": "root1",
    "children": [{
      "name": "root11",
      "children": [{
        "name": "root111",
        "href": "#"
      }, {
        "name": "root112",
        "href": "#",
        "children": [{
          "name": "root1121",
          "href": "#"
        }]
      }]
    }]
  }, {
    "name": "root2",
    "href": "#",
    "children": [{
      "name": "root21",
    }]
  }, {
    "name": "root3",
    "href": "#",
    "children": [{
      "name": "root31",
    }, {
      "name": "root32",
    }]
  }, {
    "name": "root4",
    "href": "#"
  }];

  new ChjMenu({
    data: data,
    warpId: "menuid"
  });
</script>